<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Progress</title>
</head>
<body>
    <h1>Processing...</h1>
    <progress id="progressBar" value="0" max="100"></progress>
    <p id="status">{{ status }}</p>
    <script>
        function updateProgress() {
            fetch('/progress/{{ jobid }}')
                .then(response => response.text())
                .then(data => {
                    var progress = parseInt(data.split(':')[1]);
                    document.getElementById('progressBar').value = progress;
                    if (progress >= 3) {
                        location.reload();
                    }
                });
        }

        setInterval(updateProgress, 1000);
    </script>
</body>
</html>